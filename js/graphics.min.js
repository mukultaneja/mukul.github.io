!function($){var trace=function(msg){if("undefined"!=typeof window&&window.console){for(var len=arguments.length,args=[],i=0;len>i;i++)args.push("arguments["+i+"]");eval("console.log("+args.join(",")+")")}},dirname=function(e){var r=e.replace(/^\/?(.*?)\/?$/,"$1").split("/");return r.pop(),"/"+r.join("/")},basename=function(e){var r=e.replace(/^\/?(.*?)\/?$/,"$1").split("/"),t=r.pop();return""==t?null:t},_ordinalize_re=/(\d)(?=(\d\d\d)+(?!\d))/g,ordinalize=function(e){var r=""+e;return 11e3>e?r=(""+e).replace(_ordinalize_re,"$1,"):1e6>e?r=Math.floor(e/1e3)+"k":1e9>e&&(r=(""+Math.floor(e/1e3)).replace(_ordinalize_re,"$1,")+"m"),r},nano=function(e,r){return e.replace(/\{([\w\-\.]*)}/g,function(e,t){var o=t.split("."),n=r[o.shift()];return $.each(o,function(){n=n.hasOwnProperty(this)?n[this]:e}),n})},objcopy=function(e){if(void 0!==e){if(null===e)return null;if(e.parentNode)return e;switch(typeof e){case"string":return e.substring(0);case"number":return e+0;case"boolean":return e===!0}var r=$.isArray(e)?[]:{};return $.each(e,function(e,t){r[e]=objcopy(t)}),r}},objmerge=function(e,r){e=e||{},r=r||{};var t=objcopy(e);for(var o in r)t[o]=r[o];return t},objcmp=function(e,r,t){if(!e||!r)return e===r;if(typeof e!=typeof r)return!1;if("object"!=typeof e)return e===r;if($.isArray(e)){if(!$.isArray(r))return!1;if(e.length!=r.length)return!1}else{var o=[];for(var n in e)e.hasOwnProperty(n)&&o.push(n);var i=[];for(var n in r)r.hasOwnProperty(n)&&i.push(n);if(t||(o.sort(),i.sort()),o.join(",")!==i.join(","))return!1}var a=!0;return $.each(e,function(t){var o=objcmp(e[t],r[t]);return a=a&&o,a?void 0:!1}),a},objkeys=function(e){var r=[];return $.each(e,function(t,o){e.hasOwnProperty(t)&&r.push(t)}),r},objcontains=function(e){if(!e||"object"!=typeof e)return!1;for(var r=1,t=arguments.length;t>r;r++)if(e.hasOwnProperty(arguments[r]))return!0;return!1},uniq=function(e){for(var r=e.length,t={},o=0;r>o;o++)t[e[o]]=!0;return objkeys(t)},arbor_path=function(){var e=$("script").map(function(e){var r=$(this).attr("src");if(r)return r.match(/arbor[^\/\.]*.js|dev.js/)?r.match(/.*\//)||"/":void 0});return e.length>0?e[0]:null},Colors=function(){var e=/#[0-9a-f]{6}/i,r=/#(..)(..)(..)/,t=function(e){var r=e.toString(16);return 2==r.length?r:"0"+r},o=function(e){return parseInt(e,16)},n=function(e){if(!e||"object"!=typeof e)return!1;var r=objkeys(e).sort().join("");return"abgr"==r?!0:void 0},i={CSS:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},decode:function(t){for(var a=arguments.length,l=a-1;l>=0;l--)void 0===arguments[l]&&a--;var f=arguments;if(!t)return null;if(1==a&&n(t))return t;var s=null;if("string"==typeof t){var d=1;2==a&&(d=f[1]);var u=i.CSS[t.toLowerCase()];void 0!==u&&(t=u);var c=t.match(e);if(c){if(vals=t.match(r),!vals||!vals.length||4!=vals.length)return null;s={r:o(vals[1]),g:o(vals[2]),b:o(vals[3]),a:d}}}else"number"==typeof t&&(a>=3?(s={r:f[0],g:f[1],b:f[2],a:1},a>=4&&(s.a*=f[3])):a>=1&&(s={r:f[0],g:f[0],b:f[0],a:1},2==a&&(s.a*=f[1])));return s},validate:function(r){return r&&"string"==typeof r?void 0!==i.CSS[r.toLowerCase()]?!0:r.match(e)?!0:!1:!1},mix:function(e,r,t){i.decode(e),i.decode(r)},blend:function(e,r){r=void 0!==r?Math.max(0,Math.min(1,r)):1;var t=i.decode(e);if(!t)return null;if(1==r)return e;var t=e;"string"==typeof e&&(t=i.decode(e));var o=objcopy(t);return o.a*=r,nano("rgba({r},{g},{b},{a})",o)},encode:function(e){return n(e)||(e=i.decode(e),n(e))?1==e.a?nano("#{r}{g}{b}",{r:t(e.r),g:t(e.g),b:t(e.b)}):nano("rgba({r},{g},{b},{a})",e):null}};return i}(),Primitives=function(e,r,t){var o=function(e,r,t,o,n){this.x=e,this.y=r,this.w=t,this.h=o,this.style=void 0!==n?n:{}};o.prototype={draw:function(e){this._draw(e)},_draw:function(t,o,n,i,a){if(objcontains(t,"stroke","fill","width")&&(a=t),void 0!==this.x&&(t=this.x,o=this.y,n=this.w,i=this.h,a=objmerge(this.style,a)),a=objmerge(r,a),a.stroke||a.fill){var l=.5522848;ox=n/2*l,oy=i/2*l,xe=t+n,ye=o+i,xm=t+n/2,ym=o+i/2,e.save(),e.beginPath(),e.moveTo(t,ym),e.bezierCurveTo(t,ym-oy,xm-ox,o,xm,o),e.bezierCurveTo(xm+ox,o,xe,ym-oy,xe,ym),e.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye),e.bezierCurveTo(xm-ox,ye,t,ym+oy,t,ym),e.closePath(),null!==a.fill&&(void 0!==a.alpha?e.fillStyle=Colors.blend(a.fill,a.alpha):e.fillStyle=Colors.encode(a.fill),e.fill()),null!==a.stroke&&(e.strokeStyle=Colors.encode(a.stroke),isNaN(a.width)||(e.lineWidth=a.width),e.stroke()),e.restore()}}};var n=function(e,r,t,o,n,i){objcontains(n,"stroke","fill","width")&&(i=n,n=0),this.x=e,this.y=r,this.w=t,this.h=o,this.r=void 0!==n?n:0,this.style=void 0!==i?i:{}};n.prototype={draw:function(e){this._draw(e)},_draw:function(t,o,n,i,a,l){if(objcontains(a,"stroke","fill","width","alpha")?(l=a,a=0):objcontains(t,"stroke","fill","width","alpha")&&(l=t),void 0!==this.x&&(t=this.x,o=this.y,n=this.w,i=this.h,l=objmerge(this.style,l)),l=objmerge(r,l),l.stroke||l.fill){var f=a>0;e.save(),e.beginPath(),e.moveTo(t+a,o),e.lineTo(t+n-a,o),f&&e.quadraticCurveTo(t+n,o,t+n,o+a),e.lineTo(t+n,o+i-a),f&&e.quadraticCurveTo(t+n,o+i,t+n-a,o+i),e.lineTo(t+a,o+i),f&&e.quadraticCurveTo(t,o+i,t,o+i-a),e.lineTo(t,o+a),f&&e.quadraticCurveTo(t,o,t+a,o),null!==l.fill&&(void 0!==l.alpha?e.fillStyle=Colors.blend(l.fill,l.alpha):e.fillStyle=Colors.encode(l.fill),e.fill()),null!==l.stroke&&(e.strokeStyle=Colors.encode(l.stroke),isNaN(l.width)||(e.lineWidth=l.width),e.stroke()),e.restore()}}};var i=function(e,r,t,o,n){void 0!==n||"number"==typeof o?(this.points=[{x:e,y:r},{x:t,y:o}],this.style=n||{}):$.isArray(e)?(this.points=e,this.style=r||{}):(this.points=[e,r],this.style=t||{})};i.prototype={draw:function(t){if(!(this.points.length<2)){var o=[];$.isArray(this.points[0])?o=this.points:o.push(this.points),e.save(),e.beginPath(),$.each(o,function(r,t){e.moveTo(t[0].x+.5,t[0].y+.5),$.each(t,function(r,t){0!=r&&e.lineTo(t.x+.5,t.y+.5)})});var n=$.extend(objmerge(r,this.style),t);if(n.closed&&e.closePath(),void 0!==n.fill){var i=Colors.decode(n.fill,void 0!==n.alpha?n.alpha:1);i&&(e.fillStyle=Colors.encode(i)),e.fill()}if(void 0!==n.stroke){var a=Colors.decode(n.stroke,void 0!==n.alpha?n.alpha:1);a&&(e.strokeStyle=Colors.encode(a)),isNaN(n.width)||(e.lineWidth=n.width),e.stroke()}e.restore()}}};var a=function(e,r,t,o){var n=Colors.decode(e,r,t,o);n&&(this.r=n.r,this.g=n.g,this.b=n.b,this.a=n.a)};return a.prototype={toString:function(){return Colors.encode(this)},blend:function(){trace("blend",this.r,this.g,this.b,this.a)}},{_Oval:o,_Rect:n,_Color:a,_Path:i}},Graphics=function(e){var r=$(e),t=$(r).get(0).getContext("2d"),o={},n={background:null,fill:null,stroke:null,width:0},i={},a={font:"sans-serif",size:12,align:"left",color:Colors.decode("black"),alpha:1,baseline:"ideographic"},l=[],f=Primitives(t,n,a),s=f._Oval,d=f._Rect,u=f._Color,c=f._Path,h={init:function(){return t?h:null},size:function(e,t){return isNaN(e)||isNaN(t)||r.attr({width:e,height:t}),{width:r.attr("width"),height:r.attr("height")}},clear:function(e,o,i,a){arguments.length<4&&(e=0,o=0,i=r.attr("width"),a=r.attr("height")),t.clearRect(e,o,i,a),null!==n.background&&(t.save(),t.fillStyle=Colors.encode(n.background),t.fillRect(e,o,i,a),t.restore())},background:function(e,r,t,o){if(null==e)return n.background=null,null;var i=Colors.decode(e,r,t,o);i&&(n.background=i,h.clear())},noFill:function(){n.fill=null},fill:function(e,r,o,i){if(0==arguments.length)return n.fill;if(arguments.length>0){var a=Colors.decode(e,r,o,i);n.fill=a,t.fillStyle=Colors.encode(a)}},noStroke:function(){n.stroke=null,t.strokeStyle=null},stroke:function(e,r,o,i){if(0==arguments.length&&null!==n.stroke)return n.stroke;if(arguments.length>0){var a=Colors.decode(e,r,o,i);n.stroke=a,t.strokeStyle=Colors.encode(a)}},strokeWidth:function(e){return void 0===e?t.lineWidth:void(t.lineWidth=n.width=e)},Color:function(e){return new u(e)},drawStyle:function(e){if(0==arguments.length)return objcopy(n);if(2!=arguments.length)1==arguments.length&&void 0!==o[arguments[0]]&&(e=o[arguments[0]]),void 0!==e.width&&(n.width=e.width),t.lineWidth=n.width,$.each("background fill stroke",function(r,t){if(void 0!==e[t])if(null===e[t])n[t]=null;else{var o=Colors.decode(e[t]);o&&(n[t]=o)}}),t.fillStyle=n.fill,t.strokeStyle=n.stroke;else{var r=arguments[0],i=arguments[1];if("string"==typeof r&&"object"==typeof i){var a={};if(void 0!==i.color){var l=Colors.decode(i.color);l&&(a.color=l)}$.each("background fill stroke width".split(" "),function(e,r){void 0!==i[r]&&(a[r]=i[r])}),$.isEmptyObject(a)||(o[r]=a)}}},textStyle:function(e){if(0==arguments.length)return objcopy(a);if(2!=arguments.length){if(1==arguments.length&&void 0!==i[arguments[0]]&&(e=i[arguments[0]]),void 0!==e.font&&(a.font=e.font),void 0!==e.size&&(a.size=e.size),t.font=nano("{size}px {font}",a),void 0!==e.align&&(t.textAlign=a.align=e.align),void 0!==e.baseline&&(t.textBaseline=a.baseline=e.baseline),void 0!==e.alpha&&(a.alpha=e.alpha),void 0!==e.color){var r=Colors.decode(e.color);r&&(a.color=r)}if(a.color){var r=Colors.blend(a.color,a.alpha);r&&(t.fillStyle=r)}}else{var o=arguments[0],n=arguments[1];if("string"==typeof o&&"object"==typeof n){var l={};if(void 0!==n.color){var r=Colors.decode(n.color);r&&(l.color=r)}$.each("font size align baseline alpha".split(" "),function(e,r){void 0!==n[r]&&(l[r]=n[r])}),$.isEmptyObject(l)||(i[o]=l)}}},text:function(e,r,o,n){arguments.length>=3&&!isNaN(r)?(n=n||{},n.x=r,n.y=o):n=2==arguments.length&&"object"==typeof r?r:n||{};var i=objmerge(a,n);t.save(),void 0!==i.align&&(t.textAlign=i.align),void 0!==i.baseline&&(t.textBaseline=i.baseline),void 0===i.font||isNaN(i.size)||(t.font=nano("{size}px {font}",i));var l=void 0!==i.alpha?i.alpha:a.alpha,f=void 0!==i.color?i.color:a.color;t.fillStyle=Colors.blend(f,l),l>0&&t.fillText(e,Math.round(i.x),i.y),t.restore()},textWidth:function(e,r){r=objmerge(a,r||{}),t.save(),t.font=nano("{size}px {font}",r);var o=t.measureText(e).width;return t.restore(),o},Rect:function(e,r,t,o,n,i){return new d(e,r,t,o,n,i)},rect:function(e,r,t,o,n,i){d.prototype._draw(e,r,t,o,n,i)},Oval:function(e,r,t,o,n){return new s(e,r,t,o,n)},oval:function(e,r,t,o,n){n=n||{},s.prototype._draw(e,r,t,o,n)},line:function(e,r,t,o,n){var i=new c(e,r,t,o);i.draw(n)},lines:function(e,r,t,o){"number"==typeof o?l.push([{x:e,y:r},{x:t,y:o}]):l.push([e,r])},drawLines:function(e){var r=new c(l);r.draw(e),l=[]}};return h.init()};arbor="undefined"!=typeof arbor?arbor:{},$.extend(arbor,{Graphics:function(e){return Graphics(e)},colors:{CSS:Colors.CSS,validate:Colors.validate,decode:Colors.decode,encode:Colors.encode,blend:Colors.blend}})}(this.jQuery);